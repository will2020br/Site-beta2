<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamFlow - Player Estilo Netflix</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Netflix Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #141414;
            color: white;
            overflow-x: hidden;
        }
        
        /* Netflix Header */
        .netflix-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 4%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, transparent 100%);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .netflix-header.scrolled {
            background: #141414;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #e50914;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 32px;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .nav-item {
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-item:hover {
            color: #b3b3b3;
        }
        
        .nav-item.active {
            color: #e50914;
            font-weight: bold;
        }
        
        /* Main Container */
        .main-container {
            margin-top: 80px;
            padding: 0 4%;
        }
        
        /* Hero Section */
        .hero-section {
            position: relative;
            height: 70vh;
            background: linear-gradient(to top, #141414 0%, transparent 50%, #141414 100%);
            margin-bottom: 40px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            z-index: -1;
        }
        
        .hero-content {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 60px;
            max-width: 600px;
        }
        
        .hero-title {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .hero-description {
            font-size: 20px;
            color: #d2d2d2;
            margin-bottom: 30px;
            line-height: 1.4;
        }
        
        .hero-buttons {
            display: flex;
            gap: 15px;
        }
        
        .hero-btn {
            padding: 12px 35px;
            border-radius: 5px;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .hero-btn.play {
            background: #fff;
            color: #000;
        }
        
        .hero-btn.info {
            background: rgba(109, 109, 110, 0.7);
            color: #fff;
        }
        
        .hero-btn:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }
        
        /* Content Sections */
        .content-section {
            margin-bottom: 60px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }
        
        .see-all {
            color: #e50914;
            text-decoration: none;
            font-size: 14px;
            font-weight: bold;
            transition: opacity 0.3s;
        }
        
        .see-all:hover {
            opacity: 0.8;
        }
        
        /* Content Row */
        .content-row {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: none;
        }
        
        .content-row::-webkit-scrollbar {
            display: none;
        }
        
        /* Content Card */
        .content-card {
            min-width: 220px;
            height: 320px;
            background: #2f2f2f;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .content-card:hover {
            transform: scale(1.05);
            z-index: 100;
        }
        
        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s;
        }
        
        .content-card:hover .card-image {
            opacity: 0.3;
        }
        
        .card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        
        .content-card:hover .card-overlay {
            opacity: 1;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .card-meta {
            display: flex;
            gap: 15px;
            font-size: 14px;
            color: #b3b3b3;
            margin-bottom: 15px;
        }
        
        .card-buttons {
            display: flex;
            gap: 10px;
        }
        
        .card-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.7);
            background: rgba(0,0,0,0.6);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .card-btn:hover {
            background: #fff;
            color: #000;
            border-color: #fff;
        }
        
        /* Quick Embed Section */
        .quick-embed-section {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid #333;
        }
        
        .quick-embed-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #fff;
        }
        
        .embed-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-label {
            font-size: 14px;
            color: #b3b3b3;
            font-weight: 500;
        }
        
        .form-input {
            padding: 12px 15px;
            background: #333;
            border: 1px solid #444;
            border-radius: 5px;
            color: white;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #e50914;
            background: #404040;
        }
        
        .form-textarea {
            padding: 15px;
            background: #333;
            border: 1px solid #444;
            border-radius: 5px;
            color: white;
            font-size: 14px;
            resize: vertical;
            min-height: 120px;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }
        
        .form-textarea:focus {
            outline: none;
            border-color: #e50914;
            background: #404040;
        }
        
        .form-submit {
            grid-column: span 2;
            padding: 15px;
            background: #e50914;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .form-submit:hover {
            background: #f40612;
            transform: translateY(-2px);
        }
        
        /* Player Modal */
        .player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .player-container {
            width: 90%;
            max-width: 1200px;
            height: 80vh;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .player-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%);
        }
        
        .player-title {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }
        
        .close-player {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-player:hover {
            color: #e50914;
        }
        
        .player-content {
            width: 100%;
            height: calc(100% - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .video-embed {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Playlist Sidebar */
        .playlist-sidebar {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: #141414;
            z-index: 1500;
            transition: right 0.3s ease-in-out;
            border-left: 1px solid #333;
            overflow-y: auto;
        }
        
        .playlist-sidebar.open {
            right: 0;
        }
        
        .sidebar-header {
            padding: 30px;
            background: #1a1a1a;
            border-bottom: 1px solid #333;
        }
        
        .sidebar-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }
        
        .sidebar-subtitle {
            color: #b3b3b3;
            font-size: 14px;
        }
        
        .sidebar-content {
            padding: 20px;
        }
        
        .playlist-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .playlist-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #2f2f2f;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .playlist-item:hover {
            background: #404040;
            transform: translateX(-5px);
        }
        
        .playlist-item.active {
            background: #e50914;
        }
        
        .item-number {
            width: 30px;
            height: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .item-info {
            flex: 1;
        }
        
        .item-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .item-meta {
            display: flex;
            gap: 10px;
            font-size: 12px;
            color: #b3b3b3;
        }
        
        .item-actions {
            display: flex;
            gap: 10px;
        }
        
        .item-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .item-btn:hover {
            color: #fff;
            background: rgba(255,255,255,0.1);
        }
        
        .item-btn.delete {
            color: #e50914;
        }
        
        /* Controls */
        .playlist-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: #e50914;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 20px rgba(229, 9, 20, 0.3);
        }
        
        .playlist-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(229, 9, 20, 0.5);
        }
        
        .playlist-toggle .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #fff;
            color: #e50914;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: #e50914;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 1001;
            animation: slideIn 0.3s ease;
            display: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Loading Spinner */
        .loading-spinner {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2001;
            display: none;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #333;
            border-top: 3px solid #e50914;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .embed-form {
                grid-template-columns: 1fr;
            }
            
            .form-submit {
                grid-column: span 1;
            }
            
            .playlist-sidebar {
                width: 350px;
            }
        }
        
        @media (max-width: 768px) {
            .netflix-header {
                padding: 15px 20px;
            }
            
            .hero-content {
                padding: 0 30px;
            }
            
            .hero-title {
                font-size: 36px;
            }
            
            .hero-description {
                font-size: 16px;
            }
            
            .content-card {
                min-width: 180px;
                height: 270px;
            }
            
            .playlist-sidebar {
                width: 100%;
            }
            
            .playlist-toggle {
                bottom: 20px;
                right: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .hero-section {
                height: 50vh;
            }
            
            .hero-content {
                padding: 0 20px;
            }
            
            .hero-title {
                font-size: 28px;
            }
            
            .hero-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .hero-btn {
                width: 100%;
                justify-content: center;
            }
            
            .content-card {
                min-width: 150px;
                height: 225px;
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #2f2f2f;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #e50914;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #f40612;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Netflix Header -->
    <header class="netflix-header" id="netflixHeader">
        <div class="logo">
            <i class="fas fa-play-circle"></i>
            <span>StreamFlow</span>
        </div>
        <nav class="nav-links">
            <a href="#inicio" class="nav-item active">In√≠cio</a>
            <a href="#series" class="nav-item">S√©ries</a>
            <a href="#filmes" class="nav-item">Filmes</a>
            <a href="#minha-lista" class="nav-item">Minha Lista</a>
            <div class="nav-item" onclick="toggleAdBlock()">
                <i class="fas fa-shield-alt"></i> AdBlock
            </div>
        </nav>
    </header>
    
    <!-- Main Content -->
    <main class="main-container">
        <!-- Hero Section -->
        <section class="hero-section" id="hero">
            <div class="hero-background"></div>
            <div class="hero-content">
                <h1 class="hero-title">StreamFlow Premium</h1>
                <p class="hero-description">
                    Assista a filmes, s√©ries e muito mais sem limites. 
                    Adicione seus pr√≥prios conte√∫dos e crie sua playlist personalizada.
                </p>
                <div class="hero-buttons">
                    <button class="hero-btn play" onclick="openQuickEmbed()">
                        <i class="fas fa-play"></i> Adicionar Embed
                    </button>
                    <button class="hero-btn info" onclick="openPlaylistSidebar()">
                        <i class="fas fa-info-circle"></i> Minha Playlist
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Quick Embed Section -->
        <section class="content-section">
            <div class="quick-embed-section">
                <h2 class="quick-embed-title">Adicionar Embed R√°pido</h2>
                <form class="embed-form" id="embedForm" onsubmit="addQuickEmbed(event)">
                    <div class="form-group">
                        <label class="form-label">T√≠tulo do Conte√∫do</label>
                        <input type="text" class="form-input" id="embedTitle" 
                               placeholder="Ex: Filme Favorito, S√©rie Nova" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">URL da Imagem (Thumbnail)</label>
                        <input type="text" class="form-input" id="embedImage" 
                               placeholder="https://exemplo.com/imagem.jpg">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Plataforma</label>
                        <select class="form-input" id="embedPlatform">
                            <option value="youtube">YouTube</option>
                            <option value="vimeo">Vimeo</option>
                            <option value="custom">Embed Personalizado</option>
                            <option value="direct">Link Direto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">URL ou C√≥digo Embed</label>
                        <textarea class="form-textarea" id="embedCode" 
                                  placeholder="Cole aqui o link do v√≠deo ou c√≥digo iframe completo..." required></textarea>
                    </div>
                    <button type="submit" class="form-submit">
                        <i class="fas fa-plus-circle"></i> Adicionar √† Playlist
                    </button>
                </form>
            </div>
        </section>
        
        <!-- My Playlist Section -->
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">Minha Playlist</h2>
                <a href="#" class="see-all" onclick="openPlaylistSidebar()">Ver Todos</a>
            </div>
            <div class="content-row" id="playlistPreview">
                <!-- Cards ser√£o gerados dinamicamente -->
            </div>
        </section>
        
        <!-- Recently Added -->
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">Adicionados Recentemente</h2>
                <a href="#" class="see-all">Ver Todos</a>
            </div>
            <div class="content-row" id="recentContent">
                <!-- Cards ser√£o gerados dinamicamente -->
            </div>
        </section>
        
        <!-- Popular Now -->
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">Populares Agora</h2>
                <a href="#" class="see-all">Explorar</a>
            </div>
            <div class="content-row" id="popularContent">
                <!-- Cards ser√£o gerados dinamicamente -->
            </div>
        </section>
    </main>
    
    <!-- Player Modal -->
    <div class="player-modal" id="playerModal">
        <div class="player-container">
            <div class="player-header">
                <h3 class="player-title" id="playerTitle">Carregando...</h3>
                <button class="close-player" onclick="closePlayer()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="player-content" id="playerContent">
                <div class="empty-video" style="text-align: center; padding: 40px;">
                    <i class="fas fa-play-circle" style="font-size: 60px; margin-bottom: 20px; opacity: 0.3;"></i>
                    <h3 style="color: #fff; margin-bottom: 10px;">Nenhum conte√∫do selecionado</h3>
                    <p style="color: #b3b3b3;">Selecione um conte√∫do para reproduzir</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Playlist Sidebar -->
    <div class="playlist-sidebar" id="playlistSidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">Minha Playlist</h3>
            <p class="sidebar-subtitle" id="playlistCount">0 itens</p>
        </div>
        <div class="sidebar-content">
            <div class="playlist-items" id="playlistItems">
                <!-- Itens da playlist ser√£o gerados dinamicamente -->
                <div style="text-align: center; padding: 40px; color: #b3b3b3;">
                    <i class="fas fa-film" style="font-size: 48px; margin-bottom: 20px; opacity: 0.3;"></i>
                    <p>Sua playlist est√° vazia</p>
                    <p style="font-size: 12px; margin-top: 10px;">Adicione conte√∫dos usando o formul√°rio acima</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Playlist Toggle Button -->
    <button class="playlist-toggle" onclick="openPlaylistSidebar()">
        <i class="fas fa-list"></i>
        <span class="badge" id="playlistBadge">0</span>
    </button>
    
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // State Management
        let playlist = [];
        let currentMedia = null;
        let isAdBlockEnabled = true;
        let isSidebarOpen = false;
        
        // DOM Elements
        const playerModal = document.getElementById('playerModal');
        const playerContent = document.getElementById('playerContent');
        const playerTitle = document.getElementById('playerTitle');
        const playlistSidebar = document.getElementById('playlistSidebar');
        const playlistItems = document.getElementById('playlistItems');
        const playlistPreview = document.getElementById('playlistPreview');
        const recentContent = document.getElementById('recentContent');
        const popularContent = document.getElementById('popularContent');
        const playlistBadge = document.getElementById('playlistBadge');
        const playlistCount = document.getElementById('playlistCount');
        const netflixHeader = document.getElementById('netflixHeader');
        const notification = document.getElementById('notification');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const embedForm = document.getElementById('embedForm');
        
        // Platform Templates
        const embedTemplates = {
            'youtube': (url) => {
                const videoId = extractYouTubeId(url);
                if (videoId) {
                    return `<iframe class="video-embed" src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1" 
                            frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen></iframe>`;
                }
                return null;
            },
            'vimeo': (url) => {
                const videoId = extractVimeoId(url);
                if (videoId) {
                    return `<iframe class="video-embed" src="https://player.vimeo.com/video/${videoId}?autoplay=1&title=0&byline=0&portrait=0" 
                            frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>`;
                }
                return null;
            },
            'custom': (code) => {
                // Extract iframe src from embed code
                const parser = new DOMParser();
                const doc = parser.parseFromString(code, 'text/html');
                const iframe = doc.querySelector('iframe');
                if (iframe) {
                    return code;
                }
                // If it's just a URL, wrap it in iframe
                if (code.startsWith('http')) {
                    return `<iframe class="video-embed" src="${code}" frameborder="0" allowfullscreen></iframe>`;
                }
                return null;
            },
            'direct': (url) => {
                return `<iframe class="video-embed" src="${url}" frameborder="0" allowfullscreen></iframe>`;
            }
        };
        
        // Initialize
        function init() {
            loadPlaylist();
            updateUI();
            setupEventListeners();
            
            // Header scroll effect
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    netflixHeader.classList.add('scrolled');
                } else {
                    netflixHeader.classList.remove('scrolled');
                }
            });
            
            // Platform selector change
            document.getElementById('embedPlatform').addEventListener('change', function() {
                const platform = this.value;
                const embedCodeInput = document.getElementById('embedCode');
                const placeholder = getPlaceholderForPlatform(platform);
                embedCodeInput.placeholder = placeholder;
            });
            
            console.log('üé¨ StreamFlow iniciado com sucesso!');
        }
        
        // Get placeholder for platform
        function getPlaceholderForPlatform(platform) {
            switch(platform) {
                case 'youtube':
                    return 'Cole o link do YouTube (ex: https://youtube.com/watch?v=ABC123)';
                case 'vimeo':
                    return 'Cole o link do Vimeo (ex: https://vimeo.com/123456789)';
                case 'custom':
                    return 'Cole o c√≥digo iframe completo ou URL do embed';
                case 'direct':
                    return 'Cole a URL direta do v√≠deo ou stream';
                default:
                    return 'Cole aqui o link do v√≠deo ou c√≥digo iframe completo...';
            }
        }
        
        // Load playlist from localStorage
        function loadPlaylist() {
            try {
                const saved = localStorage.getItem('streamflow_playlist');
                if (saved) {
                    playlist = JSON.parse(saved);
                    console.log(`üìä Playlist carregada: ${playlist.length} itens`);
                }
            } catch (error) {
                console.error('Erro ao carregar playlist:', error);
                playlist = [];
            }
        }
        
        // Save playlist to localStorage
        function savePlaylist() {
            try {
                localStorage.setItem('streamflow_playlist', JSON.stringify(playlist));
            } catch (error) {
                console.error('Erro ao salvar playlist:', error);
            }
        }
        
        // Add quick embed
        function addQuickEmbed(event) {
            event.preventDefault();
            
            const title = document.getElementById('embedTitle').value.trim();
            const image = document.getElementById('embedImage').value.trim();
            const platform = document.getElementById('embedPlatform').value;
            const code = document.getElementById('embedCode').value.trim();
            
            if (!title || !code) {
                showNotification('Preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }
            
            // Generate embed HTML
            let embedHtml = null;
            if (embedTemplates[platform]) {
                embedHtml = embedTemplates[platform](code);
            }
            
            if (!embedHtml) {
                showNotification('N√£o foi poss√≠vel processar o embed. Verifique o formato!', 'error');
                return;
            }
            
            // Create media item
            const mediaItem = {
                id: Date.now(),
                title: title,
                image: image || getDefaultImage(platform),
                platform: platform,
                embed: embedHtml,
                dateAdded: Date.now(),
                category: 'personal',
                views: 0
            };
            
            // Add to playlist
            playlist.unshift(mediaItem); // Add to beginning
            savePlaylist();
            updateUI();
            
            // Clear form
            embedForm.reset();
            document.getElementById('embedPlatform').value = 'youtube';
            document.getElementById('embedCode').placeholder = getPlaceholderForPlatform('youtube');
            
            showNotification(`"${title}" adicionado √† playlist!`);
        }
        
        // Get default image for platform
        function getDefaultImage(platform) {
            const images = {
                'youtube': 'https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                'vimeo': 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                'custom': 'https://images.unsplash.com/photo-1536240478700-b869070f9279?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
                'direct': 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            };
            return images[platform] || 'https://images.unsplash.com/photo-1536240478700-b869070f9279?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80';
        }
        
        // Extract YouTube video ID
        function extractYouTubeId(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }
        
        // Extract Vimeo video ID
        function extractVimeoId(url) {
            const regex = /vimeo\.com\/([0-9]+)/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }
        
        // Update UI
        function updateUI() {
            updatePlaylistSidebar();
            updatePlaylistPreview();
            updateRecentContent();
            updatePopularContent();
            updatePlaylistBadge();
        }
        
        // Update playlist sidebar
        function updatePlaylistSidebar() {
            playlistItems.innerHTML = '';
            
            if (playlist.length === 0) {
                playlistItems.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #b3b3b3;">
                        <i class="fas fa-film" style="font-size: 48px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <p>Sua playlist est√° vazia</p>
                        <p style="font-size: 12px; margin-top: 10px;">Adicione conte√∫dos usando o formul√°rio acima</p>
                    </div>
                `;
                playlistCount.textContent = '0 itens';
                return;
            }
            
            playlistCount.textContent = `${playlist.length} ${playlist.length === 1 ? 'item' : 'itens'}`;
            
            playlist.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = `playlist-item ${currentMedia?.id === item.id ? 'active' : ''}`;
                itemElement.dataset.id = item.id;
                
                itemElement.innerHTML = `
                    <div class="item-number">${index + 1}</div>
                    <div class="item-info">
                        <div class="item-title">${item.title}</div>
                        <div class="item-meta">
                            <span>${getPlatformName(item.platform)}</span>
                            <span>${formatDate(item.dateAdded)}</span>
                            <span>${item.views} visualiza√ß√µes</span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="item-btn" onclick="playMedia(${item.id}, event)">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="item-btn delete" onclick="removeFromPlaylist(${item.id}, event)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                itemElement.addEventListener('click', (e) => {
                    if (!e.target.closest('.item-actions')) {
                        playMedia(item.id);
                    }
                });
                
                playlistItems.appendChild(itemElement);
            });
        }
        
        // Update playlist preview (main page)
        function updatePlaylistPreview() {
            playlistPreview.innerHTML = '';
            
            const previewItems = playlist.slice(0, 6); // Show first 6 items
            
            previewItems.forEach((item, index) => {
                const card = createContentCard(item, index);
                playlistPreview.appendChild(card);
            });
            
            if (previewItems.length === 0) {
                playlistPreview.innerHTML = `
                    <div style="min-width: 100%; text-align: center; padding: 40px; color: #b3b3b3;">
                        <i class="fas fa-plus-circle" style="font-size: 48px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <p>Comece adicionando seu primeiro conte√∫do</p>
                        <button class="hero-btn play" onclick="openQuickEmbed()" style="margin-top: 20px;">
                            <i class="fas fa-plus"></i> Adicionar Primeiro Item
                        </button>
                    </div>
                `;
            }
        }
        
        // Update recent content
        function updateRecentContent() {
            recentContent.innerHTML = '';
            
            const recentItems = [...playlist]
                .sort((a, b) => b.dateAdded - a.dateAdded)
                .slice(0, 8);
            
            recentItems.forEach((item, index) => {
                const card = createContentCard(item, index);
                recentContent.appendChild(card);
            });
            
            if (recentItems.length === 0) {
                recentContent.innerHTML = `
                    <div style="min-width: 220px; height: 320px; background: #2f2f2f; border-radius: 8px; 
                         display: flex; align-items: center; justify-content: center; color: #b3b3b3;">
                        <i class="fas fa-clock" style="font-size: 48px; opacity: 0.3;"></i>
                    </div>
                `;
            }
        }
        
        // Update popular content (based on views)
        function updatePopularContent() {
            popularContent.innerHTML = '';
            
            const popularItems = [...playlist]
                .sort((a, b) => b.views - a.views)
                .slice(0, 8);
            
            popularItems.forEach((item, index) => {
                const card = createContentCard(item, index);
                popularContent.appendChild(card);
            });
            
            if (popularItems.length === 0) {
                popularContent.innerHTML = `
                    <div style="min-width: 220px; height: 320px; background: #2f2f2f; border-radius: 8px; 
                         display: flex; align-items: center; justify-content: center; color: #b3b3b3;">
                        <i class="fas fa-fire" style="font-size: 48px; opacity: 0.3;"></i>
                    </div>
                `;
            }
        }
        
        // Create content card
        function createContentCard(item, index) {
            const card = document.createElement('div');
            card.className = 'content-card';
            card.dataset.id = item.id;
            
            card.innerHTML = `
                <img src="${item.image}" alt="${item.title}" class="card-image" 
                     onerror="this.src='https://images.unsplash.com/photo-1536240478700-b869070f9279?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'">
                <div class="card-overlay">
                    <h4 class="card-title">${item.title}</h4>
                    <div class="card-meta">
                        <span>${getPlatformName(item.platform)}</span>
                        <span>${item.views} views</span>
                    </div>
                    <div class="card-buttons">
                        <button class="card-btn" onclick="playMedia(${item.id}, event)">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="card-btn" onclick="addToFavorites(${item.id}, event)">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="card-btn" onclick="removeFromPlaylist(${item.id}, event)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', (e) => {
                if (!e.target.closest('.card-btn')) {
                    playMedia(item.id);
                }
            });
            
            return card;
        }
        
        // Update playlist badge
        function updatePlaylistBadge() {
            playlistBadge.textContent = playlist.length;
        }
        
        // Get platform name
        function getPlatformName(platform) {
            const names = {
                'youtube': 'YouTube',
                'vimeo': 'Vimeo',
                'custom': 'Embed',
                'direct': 'Direto'
            };
            return names[platform] || platform;
        }
        
        // Format date
        function formatDate(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            
            if (days === 0) return 'Hoje';
            if (days === 1) return 'Ontem';
            if (days < 7) return `${days} dias atr√°s`;
            if (days < 30) return `${Math.floor(days / 7)} semanas atr√°s`;
            return date.toLocaleDateString('pt-BR');
        }
        
        // Play media
        function playMedia(id, event) {
            if (event) event.stopPropagation();
            
            const media = playlist.find(item => item.id === id);
            if (!media) return;
            
            currentMedia = media;
            
            // Increment views
            media.views = (media.views || 0) + 1;
            savePlaylist();
            
            // Update player
            playerTitle.textContent = media.title;
            playerContent.innerHTML = media.embed;
            
            // Open player
            playerModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Update UI
            updateUI();
            
            showNotification(`Reproduzindo: ${media.title}`);
        }
        
        // Close player
        function closePlayer() {
            playerModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            playerContent.innerHTML = `
                <div class="empty-video" style="text-align: center; padding: 40px;">
                    <i class="fas fa-play-circle" style="font-size: 60px; margin-bottom: 20px; opacity: 0.3;"></i>
                    <h3 style="color: #fff; margin-bottom: 10px;">Nenhum conte√∫do selecionado</h3>
                    <p style="color: #b3b3b3;">Selecione um conte√∫do para reproduzir</p>
                </div>
            `;
        }
        
        // Remove from playlist
        function removeFromPlaylist(id, event) {
            if (event) event.stopPropagation();
            
            if (!confirm('Tem certeza que deseja remover este item da playlist?')) {
                return;
            }
            
            const index = playlist.findIndex(item => item.id === id);
            if (index === -1) return;
            
            const removedItem = playlist.splice(index, 1)[0];
            savePlaylist();
            updateUI();
            
            showNotification(`"${removedItem.title}" removido da playlist`);
            
            // If removed item was playing, close player
            if (currentMedia?.id === id) {
                closePlayer();
                currentMedia = null;
            }
        }
        
        // Add to favorites
        function addToFavorites(id, event) {
            if (event) event.stopPropagation();
            
            const media = playlist.find(item => item.id === id);
            if (!media) return;
            
            media.category = 'favorites';
            savePlaylist();
            updateUI();
            
            showNotification(`"${media.title}" adicionado aos favoritos!`);
        }
        
        // Open quick embed section
        function openQuickEmbed() {
            document.getElementById('embedForm').scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
            
            // Focus on title input
            document.getElementById('embedTitle').focus();
            
            showNotification('Preencha o formul√°rio para adicionar um novo embed');
        }
        
        // Open playlist sidebar
        function openPlaylistSidebar() {
            isSidebarOpen = !isSidebarOpen;
            playlistSidebar.classList.toggle('open', isSidebarOpen);
            
            if (isSidebarOpen) {
                updatePlaylistSidebar();
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
            }
        }
        
        // Close playlist sidebar
        function closePlaylistSidebar() {
            isSidebarOpen = false;
            playlistSidebar.classList.remove('open');
            document.body.style.overflow = 'auto';
        }
        
        // Toggle AdBlock
        function toggleAdBlock() {
            isAdBlockEnabled = !isAdBlockEnabled;
            showNotification(isAdBlockEnabled ? 'AdBlock ativado!' : 'AdBlock desativado');
        }
        
        // Show notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.style.background = type === 'error' ? '#dc3545' : '#e50914';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Show loading
        function showLoading(show) {
            loadingSpinner.style.display = show ? 'block' : 'none';
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Close sidebar when clicking outside
            document.addEventListener('click', (e) => {
                if (isSidebarOpen && !playlistSidebar.contains(e.target) && 
                    !e.target.closest('.playlist-toggle')) {
                    closePlaylistSidebar();
                }
            });
            
            // Close player with ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (playerModal.style.display === 'flex') {
                        closePlayer();
                    }
                    if (isSidebarOpen) {
                        closePlaylistSidebar();
                    }
                }
            });
            
            // Close player when clicking outside
            playerModal.addEventListener('click', (e) => {
                if (e.target === playerModal) {
                    closePlayer();
                }
            });
        }
        
        // Initialize on load
        window.onload = init;
        
        console.log('üé¨ StreamFlow - Player estilo Netflix');
        console.log('üìã Sistema de embeds r√°pidos e fixos');
        console.log('üé® Layout Netflix implementado');
        console.log('üíæ Playlist salva automaticamente');
    </script>
</body>
</html>